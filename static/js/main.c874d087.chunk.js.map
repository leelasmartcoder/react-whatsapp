{"version":3,"sources":["Firebase.js","StateProvider.js","Chat.js","reducer.js","Login.js","SideBarChat.js","SideBar.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","provider","GoogleAuthProvider","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","Chat","useState","seed","setSeed","input","setInput","roomId","useParams","rname","setRName","messages","setMessages","user","useEffect","console","log","collection","doc","onSnapshot","snapshot","data","name","orderBy","docs","map","Math","floor","round","className","Avatar","src","Date","length","timestamp","toDate","toUTCString","IconButton","message","displayName","onSubmit","event","preventDefault","add","FieldValue","serverTimestamp","type","placeholder","onChange","target","actionTypes","state","action","Login","dispatch","alt","Button","onClick","signInWithPopup","then","result","catch","error","alert","SideBarChat","id","addNewChat","seeds","setSeeds","random","prompt","to","SideBar","rooms","setRooms","unsubscribe","photoURL","room","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c874d087.chunk.js","sourcesContent":["// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nimport firebase from \"firebase\";\n\n // For Firebase JS SDK v7.20.0 and later, measurementId is optional\n  const firebaseConfig = {\n  apiKey: \"AIzaSyCfxTONy-36L39bxAJ9UCcZndLTn3DNOTU\",\n  authDomain: \"whatsapp-6dcd7.firebaseapp.com\",\n  databaseURL: \"https://whatsapp-6dcd7-default-rtdb.firebaseio.com\",\n  projectId: \"whatsapp-6dcd7\",\n  storageBucket: \"whatsapp-6dcd7.appspot.com\",\n  messagingSenderId: \"691672258710\",\n  appId: \"1:691672258710:web:d51992c913ce187ad2cab7\",\n  measurementId: \"G-YENBZ2W965\"\n};\n\n  const firebaseApp = firebase.initializeApp(firebaseConfig);\n  const db = firebaseApp.firestore();\n  const auth = firebase.auth();\n  const provider = new firebase.auth.\n  GoogleAuthProvider();\n\n  export { auth, provider };\n  export default db;\n\n","import React,{createContext, useContext, useReducer} from 'react';\n\nexport const StateContext =  createContext();\n\nexport const  StateProvider= ({reducer, initialState,children})=>(\n <StateContext.Provider value= {useReducer(reducer, initialState)}>\n     {children}\n </StateContext.Provider>\n);\nexport const useStateValue = () => useContext(StateContext);\n    ","import React, { useEffect, useState } from 'react';\nimport Chatcss from './Chatcss.css';\nimport {Avatar, IconButton, useRadioGroup} from \"@material-ui/core\";\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\nimport MicIcon from '@material-ui/icons/Mic';\nimport { useParams } from 'react-router-dom';\nimport db from './Firebase';\nimport firebase from 'firebase';\nimport { useStateValue } from './StateProvider';\n\nexport default function Chat(){\n    const [seed, setSeed]= useState(\"\");\n    const [input, setInput] = useState(\"\");\n    const [msg, setMsg] = useState(\"\");\n    const { roomId } = useParams();\n    const [rname, setRName] = useState(\"\");\n    const[messages, setMessages] = useState([]);\n    const [ { user }, dispatch] = useStateValue(); \n\n    useEffect(()=>{\n        if(roomId) {\n            console.log('roomId: ' + roomId);\n            db.collection(\"rooms\").doc(roomId).onSnapshot((snapshot) => setRName(\n                snapshot.data().name));\n\n             db.collection(\"rooms\").doc(roomId).collection('messages').orderBy('timestamp','asc').onSnapshot((snapshot) => (\n                 setMessages(snapshot.docs.map((doc)=> doc.data()))\n\n             ))\n\n        }\n\n    },[roomId]);\n\n\n\n    useEffect(()=>{\n        setSeed(Math.floor(Math.round() * 5000));\n    },[roomId]);\n\n    const inputEvent=(event)=>{\n        setInput(event.target.value);\n        \n    }\n    \n    \n    const submitForm = (event)=>{\n        event.preventDefault();\n        console.log(\"you typed--\" ,input);\n        \n        db.collection(\"rooms\").doc(roomId).collection('messages').add({\n            message:input,\n            name:user.displayName,\n            timestamp:firebase.firestore.FieldValue.serverTimestamp(),\n            \n\n        });\n        \n        setInput(\"\");\n    }\n\n    return(\n        <>\n        <div className=\"chat\">\n            <div className=\"chat_header\">\n                <Avatar src={`https://avatars.dicebear.com/4.5/api/human/${seed}.svg`}/>\n            \n            <div className=\"chat_headerinfo\">\n                <h2>{rname}</h2>\n                <p>Last Seen At {\"\"}\n                {new Date(\n                    messages[messages.length-1]?.\n                    timestamp?.toDate()).\n                    toUTCString()\n                    }\n                </p>\n            </div>\n            <div className=\"chat_headerRight\">\n                <IconButton>\n                   <SearchOutlinedIcon/>\n                </IconButton>\n                <IconButton>\n                    <AttachFileIcon/>\n                </IconButton>\n                <IconButton>\n                    <MoreVertIcon/>\n                </IconButton>\n            </div>\n        \n            </div>\n            <div className=\"chat_body\">\n                {messages.map((message) => (\n                     <p className={`chat_message ${message.name === user.displayName && \"chat_reciever\"}`}>\n                     <span className=\"chat_name\">{message.name}</span>\n                    {message.message}\n                    <span className=\"chat_timestamp\">\n                    {new Date(message.timestamp?.toDate()).toUTCString()}</span>\n                 </p>\n                )\n                )}\n                    \n            </div>\n            <div className=\"chat_footer\">\n                \n                    <InsertEmoticonIcon />\n                    <form onSubmit={submitForm}>\n                        <input type=\"text\" placeholder=\"Type a message\"\n                        value={input}\n                        onChange={inputEvent}/>\n                        <button>Send</button>\n                    </form>\n                    <MicIcon/>\n\n                \n\n            </div>\n                \n\n            \n        </div>\n        </>\n    );\n}","export const initialState = {\n    user : null,\n};\n\nexport const actionTypes={\n    SET_USER :\"SET_USER\",\n};\n\nconst reducer = (state, action) => {\n    console.log(action);\n    switch (action.type) {\n        case actionTypes.SET_USER:\n        return{\n            ...state,\n            user:action.user,\n\n        };\n        default:\n            return state;\n    }\n};\nexport default reducer;","import React, { useState } from 'react';\nimport {Button} from '@material-ui/core';\nimport LoginCss from './LoginCss.css';\nimport { auth,provider } from './Firebase';\nimport { useStateValue } from './StateProvider';\nimport { actionTypes } from './reducer';\n\nexport default function Login() {\n    const [{},dispatch] = useStateValue();\n\n    const signIn =()=>{\n        auth.signInWithPopup(provider)\n        .then((result) =>{\n            dispatch(\n                {\n                    type: actionTypes.SET_USER,\n                    user: result.user,\n                });\n        } )\n        .catch((error) => alert(error.message));\n\n    };\n    return(\n        <>\n        <div className=\"login\">\n            <div className=\"login_container\">\n                <img src=\"https://play-lh.googleusercontent.com/bYtqbOcTYOlgc6gqZ2rwb8lptHuwlNE75zYJu6Bn076-hTmvd96HH-6v7S0YUAAJXoJN\" alt=\"\"/>\n               <div className=\"login_text\">\n                    <h1>Sign in to WhatsApp </h1>\n               </div>\n               <Button onClick={signIn}>\n                   Sign in with google\n               </Button>\n            </div>\n\n        </div>\n        </>\n    );\n}","import { Avatar } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport db from './Firebase';\nimport SideBarChatCss from './SideBarChatCss.css';\n\n\nexport default function SideBarChat({ id, name, addNewChat}) {\n\n    const [seeds,setSeeds] =useState(\"\");\n    const [messages, setMessages] = useState(\"\"); \n    \n    useEffect( ()=>{\n        if(id) {\n            db.collection('rooms').doc(id).\n            collection('messages').orderBy('timestamp','desc').\n            onSnapshot((snapshot)=>(\n                setMessages(snapshot.docs.map((doc)=>\n                doc.data())\n                )\n            ))\n                \n        }\n    },[id])\n\n    \n    useEffect(()=>{\n        setSeeds(Math.floor(Math.random() * 5000));\n        \n    },[]);\n    const createChat = ()=>{\n        const rname = prompt(\"Please enter room name\");\n\n        if(rname) {\n            //do some database\n            db.collection(\"rooms\").add({\n                name:rname,\n            }\n\n            )\n            \n        }\n\n    }\n\n    return !addNewChat ? (\n        <>\n        <Link to={`/rooms/${id}`}>\n        <div className=\"sidebarchat\">\n            <Avatar src= {`https://avatars.dicebear.com/4.5/api/human/${seeds}.svg`}/>\n            <div className=\"sidebarchat_info\">\n            <h2>{name}</h2>\n            <p>{messages[0]?.message}</p>\n            </div>\n\n        </div>\n        </Link>\n        </>\n    ) :(\n        <div onClick={createChat}\n        className =\"sidebarchat\">\n            <h2>Add New Chat</h2>\n        </div>\n    )\n\n}","import React, { useEffect, useState } from 'react';\nimport SideBarCss from './SideBarCss.css';\nimport { Avatar, IconButton } from '@material-ui/core';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\nimport SideBarChat from './SideBarChat';\nimport db from './Firebase';\nimport { useStateValue } from './StateProvider';\n\n\n\nexport default function SideBar() {\n     \n    const [rooms,setRooms] = useState([]);\n    const [{ user }, dispatch] = useStateValue();\n\n    useEffect(()=>{\n        const unsubscribe = db.collection(\"rooms\").onSnapshot((snapshot) => \n            (\n                setRooms(snapshot.docs.map((doc) =>\n                    (\n                        {\n                            id: doc.id,\n                            data:doc.data(),\n                        }\n                    ))   \n                    \n                )\n\n        )\n        )\n        return() => {\n            unsubscribe();\n        }\n\n    },[]);\n\n    return(\n        <>\n        <div className=\"sidebar\">\n        <div className=\"sidebar_header\">\n            <Avatar src ={user?.photoURL}/>\n            <div className=\"sidebar_headerRight\">\n                <IconButton>\n                    <DonutLargeIcon/>\n                </IconButton>\n                <IconButton>\n                    <ChatIcon/>\n                </IconButton>  \n                <IconButton>  \n                    <MoreVertIcon/>\n                </IconButton>   \n            </div>\n        </div>\n        <div className=\"sidebar_search\">\n            <div className=\"sidebar_searchcontainer\">\n            <SearchOutlinedIcon/>\n            <input type =\"text\"\n            placeholder= \"search or start new chat\"/>\n            </div>\n        </div>\n            <div className=\"sidebar_chat\">\n                    <SideBarChat addNewChat/>     \n                   {rooms.map((room) => (\n                       <SideBarChat key={room.id}\n                       id={room.id}\n                       name ={room.data.name} />\n\n                   ))}\n                    \n\n             </div>   \n            </div>\n\n        \n        \n        </>\n    );\n}\n\n","\nimport { useRadioGroup } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport './App.css';\nimport Chat from './Chat';\nimport Login from './Login';\nimport SideBar from './SideBar';\nimport { useStateValue } from './StateProvider';\n\n\nexport default function App() {\n  const [{user}, dispatch] = useStateValue();\n  return (\n    <div className=\"app\">\n     {!user ? (\n       <Login/>\n     ) :(<div className=\"app_body\">\n        \n     <Router> \n        <Switch>\n          <Route path=\"/rooms/:roomId\">   \n            <SideBar/>\n            <Chat/>\n          </Route>  \n         \n         <Route  path=\"/\">\n            <SideBar/>\n         </Route>\n       </Switch>  \n   </Router>\n   </div>\n \n ) }\n </div>\n      \n  );\n}\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {StateProvider} from './StateProvider';\nimport reducer, {initialState} from './reducer';\n\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <StateProvider initialState ={initialState}\n     reducer ={reducer}>\n       <App />\n    </StateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}